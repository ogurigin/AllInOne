å‚è€ƒæ–‡ç« ï¼š ğŸ‘‰ [**ç¥å¥‡çš„ç²’å­ç³»ç»Ÿ**](https://juejin.cn/post/7155278132806123557)

GUI æ–‡æ¡£ï¼š ğŸ‘‰ https://github.com/dataarts/dat.gui

---

### åˆ›å»ºç‚¹ç²¾çµ

ä¼šæ ¹æ®é¢æ¿çš„å‚æ•°ç”Ÿæˆã€‚éœ€è¦å¯¹å…¶è¿›è¡Œå‘½åï¼Œåç»­å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„ç²¾çµä»¬è¿›è¡Œåˆ é™¤ï¼Œå¹¶é‡æ–°ç”Ÿæˆã€‚

è¿™è¾¹é‡æ¸©ä¸‹ `cos` å’Œ`sin` çš„å–å€¼èŒƒå›´

| **COS** | 0 | 90Â° | 180Â° | 270Â° | 360Â° |
| --- | --- | --- | --- | --- | --- |
|  | 1 | 0 | -1 | 0 | 1 |

| SIN | 0 | 90Â° | 180Â° | 270Â° | 360Â° |
| --- | --- | --- | --- | --- | --- |
|  | 0 | 1 | 0 | -1 | 0 |

```
//ä¸€ä¸ªéšæœºç”Ÿæˆmin- maxä¹‹é—´éšæœºæ•°çš„å‡½æ•°
const rand = (min, max) => min + Math.random() * (max - min);
/* åˆ›å»ºç‚¹ç²¾çµ 
panel ä¸ºguiæ“ä½œé¢æ¿å›è°ƒçš„å‡½æ•°*/
const createParticlesByPoints  = (panel)=>{
    const vertices = []; //å­˜å‚¨ä½ç½®ä¿¡æ¯
    const colorVertices = []; //å­˜å‚¨é¢œè‰²ä¿¡æ¯
    for ( let i = 0; i < 1000; i ++ ) {
        vertices.push(
            rand(20, 30) * Math.cos(i),
            rand(20, 30) * Math.sin(i),
            rand(-900, 100)
        ); // ç®—å‡ºæ¥å¤§æ¦‚æ˜¯ä¸€ä¸ª èºæ—‹çŠ¶ çš„æ•£ç‚¹
				//ä¼šéšæœºç”Ÿæˆä¸€ä¸ªä» 0x000000 - panel.color è®¾å®šçš„éšæœºæ•° 
        const randomColor = new THREE.Color(Math.random() * panel.color);
        colorVertices.push(randomColor.r, randomColor.g, randomColor.b);
    }

    const geometry = new THREE.BufferGeometry();
	  //è®¾ç½® å…ƒç´ çš„ä½ç½®ä¿¡æ¯ï¼Œ å…¶ä¸­3ä¸ªæ•°å€¼ ä¸ºä¸€ç»„
    geometry.setAttribute( 'position', new THREE.Float32BufferAttribute( vertices, 3 ) );
    geometry.setAttribute( 'color', new THREE.Float32BufferAttribute( colorVertices, 3 ) );

    const material = new THREE.PointsMaterial( { 
        size:panel.size,
        transparent: panel.transparent, 
        opacity: panel.opacity,
        color: new THREE.Color(panel.color),
        vertexColors: panel.vertexColors,
        sizeAttenuation: panel.sizeAttenuation,
        map: new THREE.TextureLoader().load('/particle.png')
    } );

    const points = new THREE.Points( geometry, material );
    points.name = 'particles'; //è®¾ç½® åå­—ï¼Œæ”¹å˜æ ·å¼çš„æ—¶å€™ å¯ä»¥åˆ é™¤ å¹¶é‡æ–°åŠ è½½

    scene.add( points );
}
```

### æ§åˆ¶é¢æ¿

```jsx
/* æ§åˆ¶é¢æ¿ */
const panel  = new function(){
    this.size = 5;
    this.transparent = true;
    this.opacity = 0.6;
    this.vertexColors = true;
    this.color = 0xffffff;
    this.vertexColor = 0x00ff00;
    this.sizeAttenuation = true;
    this.rotate = true;
    this.redraw = function () {
        if (scene.getObjectByName("particles")) {
            scene.remove(scene.getObjectByName("particles"));
        }
        createParticlesByPoints({
            size: panel.size,
            transparent: panel.transparent,
            opacity: panel.opacity,
            vertexColors: panel.vertexColors,
            sizeAttenuation: panel.sizeAttenuation,
            color: panel.color,
            vertexColor: panel.vertexColor
        });
    };
}
const gui = new GUI();
gui.add(panel, 'size', 0, 10).onChange(panel.redraw);
gui.add(panel, 'transparent').onChange(panel.redraw);
gui.add(panel, 'opacity', 0, 1).onChange(panel.redraw);
gui.add(panel, 'vertexColors', 0, 1).onChange(panel.redraw);
gui.addColor(panel, 'color').onChange(panel.redraw);
gui.addColor(panel, 'vertexColor').onChange(panel.redraw);
gui.add(panel, 'sizeAttenuation').onChange(panel.redraw);
```